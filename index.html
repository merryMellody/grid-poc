<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.5">
  <style>
    canvas {
      border: 5px solid black;
      border-radius: 1%;
      position: fixed;
      top: 50%;
      left: 50%;
      margin-top: -240px;
      margin-left: -320px;
    }
  </style>
  <title>Grid POC</title>
</head>
<body>
  <canvas id="gridCanvas" width="640px" height="480px"></canvas>
</body>
<script>
  const gridSize = 80;
  const canvas = document.querySelector("#gridCanvas");
  const ctx = canvas.getContext("2d");

  let cursorPos = {
    x: 0,
    y: 0,
  };
  let mouseIn = false;

  canvas.addEventListener('mousemove', function(e) {
    mouseIn = true;

    const relativeX = e.clientX - canvas.offsetLeft;
    const relativeY = e.clientY - canvas.offsetTop;
  
    if(relativeX > 0 && relativeX < canvas.width && relativeY > 0 && relativeY < canvas.height) {
        cursorPos = {
          x: relativeX,
          y: relativeY,
        }
    }
  });

  canvas.addEventListener('mouseout', function() {
    mouseIn = false;
  });

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    for (let x = 0; x < canvas.width; x += gridSize) {
      for (let y = 0; y < canvas.height; y += gridSize) {
        if (mouseIn && cursorPos.x > x && cursorPos.x < x + gridSize && cursorPos.y > y && cursorPos.y < y + gridSize) {
          ctx.fillStyle = "blue";
          ctx.fillRect(x, y, gridSize, gridSize)
        }
        
        ctx.rect(x, y, gridSize, gridSize);
        ctx.stroke();
      }
    }
    
    if (mouseIn) {
      ctx.beginPath();
      ctx.moveTo(cursorPos.x, 0);
      ctx.lineTo(cursorPos.x, canvas.height);
      ctx.stroke();
      
      ctx.beginPath();
      ctx.moveTo(0, cursorPos.y);
      ctx.lineTo(canvas.width, cursorPos.y);
      ctx.stroke();
      
      ctx.beginPath();
      ctx.arc(cursorPos.x, cursorPos.y, 40, 0, 2 * Math.PI);
      ctx.stroke();
    }

    requestAnimationFrame(draw);
  }

  draw();
</script>
</html>